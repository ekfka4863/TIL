---
date: 2021-04-16-Friday
---

# 변수와 상수 (Variable and Constant)

- 영어로 변수는 변할 수 있다는 의미에서 `variable` 그리고 상수는 변하지 않는다는 의미에서 `constant`라고 한다.
- 변수와 상수는 프로그래밍에서 매우 중요한 역할을 하는데, 이 두 가지는 프로그램이 실행되면서 프로그램이 필요로 하는 어떤 값들을 메모리에 잠시 보관했다가 다시 그 값을 사용하는 일이 자주 생기는데 이런 `보관소의 역할`을 하는 것이 변수와 상수이기 떄문이다. 

<br>
<br>

## 상수를 선언하는 방법
- `const`라는 키워드를 사용하여 상수를 선언한다;
```javascript
	// const 상수를_지칭하는_이름
	const sum = 5 + 10;

	if (sum % 3 === 0) {
		console.log('사실입니다!');
	}
	if (sum % 5 === 1) {
		console.log('사실이 아닙니다!');
	}
```
- 상수는 한 번 값이 정해지면 다른 값으로 변경하는 것이 불가능하기 때문에 상수를 선언할 때 바로 값을 할당해야 한다. 상수를 선언할 때 값을 할당하기 위해서 대입연산자를 이용한다;
```javascript
	// 상수를 선언하면서 바로 값을 할당하는 방법  
	const 상수를_지칭하는_이름 = 값;
```
<br>
<br>

## 변수를 선언하는 방법 
- `let`이라는 키워드를 사용하여 변수를 선언한다;
```javascript
	let 변수를_지칭하는_이름;
```
- 변수는 한 번 선언하고 할당을 한 뒤에도 다른 값으로 변경(재할당)이 가능하다. 
- 변수는 상수와는 달리 선언을 하면서 동시에 값을 할당하지 않아도 되는데, 이 때 변수가 갖는 값은 `undefined`이라는 '아직 값이 할당되지 않은 상태'라는 의미의 값을 갖게 된다. 
- 변수에 값을 할당할 떄도 상수와 마찬가지로 대입연산자를 사용한다;
```javascript
	// 변수에 값을 할당하는 방법  - 아직 let 키워드로 변수를 선언하지 않은 경우	
	let 변수를_지칭하는_이름 = 값;
	
	// 변수에 값을 할당하는 방법  - 이미 let 키워드로 변수를 선언한 경우	
	변수를_지칭하는_이름 = 값;
```

<br>
<br>

# 변수의 유효 범위 (Scope of Variables)

- 변수가 선언되고 사용되는 공간이 어느 공간에서 유효한지에 대한 그 기준점을 정해주는 규칙과 같은 것이다.
- 우리는 변수와 상수를 선언할 때 let 그리고 const 라는 키워드를 사용했었다. 이 두 키워드를 사용해서 선언한 변수와 상수의 유효 범위를 `블록 스코프`라고 한다.  
이때, `블록`이란 중괄호와 그 속에 있는 코드 덩어리들을 의미하는데, 이 중괄호/블록 안에서 선언된 변수와 상수는 그 공간 안에서만 사용이 가능하고, 그 `블록 스코프` 밖에서 사용을 하려고 하면 해당 변수 또는 상수에 대해서 알 수가 없기 때문에 사용이 불가능해진다. 
- 하지만, 블록 밖에서 선언된 변수 또는 상수는 블록 안에서도 알 수 있고, 그렇기 때문에 블록이 몇번이 중첩되도 블록들의 밖에서 선언된 변수 또는 상수를 호출해 낼 수 있게된다. 
```javascript
	let age = 37;

	{
		age++;
		console.log(age);     // age 라는 변수는 블록 밖에서 선언된 변수이기 떄문에 호출 가능
	}

	{
		{
			{
				console.log(age);    // 마찬가지로 중첩된 블록들 안에서도 변수 age를 불러낼 수 있다.
			}
		}
	}
```
- 이 '블록'은 앞으로 배울 `조건문`과 `반복문`에서도 사용된다.  
조건문과 반복문에서 사용되는 블록에서도 마찬가지로 블록 안에서 선언된 변수와 상수는 블록 밖에서는 알수없는/사용할 수 없는 변수 또는 상수가 되지만, 블록 밖에서 선언된 변수와 상수는 블록 안에서도 유효한 변수와 상수로 취급된다.   
이렇게 변수와 상수가 '블록(중괄호) 안에서 유효하다'라는 의미로 이를 `블록 스코프`라고 한다.

<br>
<br>

## `var`의 유효 범위 (함수 스코프)
- 일반적으로는 자바스크립트를 포함한 대부분의 프로그래밍 언어에서는 앞서 배운 const, let처럼 '블록 스코프'를 가지고 있다. 하지만 자바스크립트에서는 특이하게 블록 스코프가 아닌 `함수 스코프`를 갖는 변수 선언 방법이 있다. 함수 스코프를 갖는 변수 선언에는 `var`라는 키워드가 사용된다.
- 이 `var`라는 키워드는 ES5까지는 자바스크립트에서 변수 선언을 할 때 사용되는 가장 대표적인 변수 선언 방법이었지만, ES6부터는 `var`라는 키워드를 사용하지 않고 let과 const를 사용해서 변수와 상수를 선언하게 되었다.  
- 일반적으로 함수 스코프 보다는 블록 스코프가 사람들이 이해하기에 보다 직관적으로 알아볼 수 있다는 점 때문에 코딩의 방식이 var 키워드를 사용하는 함수 스코프 보다는 ~~let이나 const를 사용하여 선언한 변수의 유효 범위를 나타내는~~ 블록 스코프로 바뀌었다.   
하지만 기존에 만들어진 코드나 다른 라이브러리들을 사용할 때는 아직 var 라는 키워드를 많이 사용하고 있기 때문에 이 함수 스코프라는 것이 어떻게 작동하는지는 알아야 한다.  
- `함수`라는 것은 뒤에서 더 자세히 배워야 하겠지만 기본적으로 아래와 같은 문법이다;
```javascript
	// 함수는 function이라는 키워드를 사용하고 {블록}으로 함수의 body가 표현이 되고 있다.
	function() { 
		
	}
``` 
- 그렇다면 `함수 스코프`란? 
```javascript
	// 예제를 통해 살펴보자! 
	// var 함수 스코프 

	var a = 0;           // 블록 밖에서 var 키워드를 사용하여 a라는 변수를 선언 및 0이란 값을 할당한다
	
	(function() {        // 즉시 실행 함수를 선언한 뒤, 함수의 블록 내에서 a++;
		a++;
		console.log(a);   // 1을 출력하게 된다 
	})();
	
	console.log(a);     // var는 함수 스코프. 함수 내에서 a++를 했지만 함수의 블록 스코프 밖에서도 a는 여전히 1이다


	(function() {      // 즉시 실행 함수를 생성한다
		var b = 0;       // 함수의 블록 스코프 내에서 var를 사용하여 b라는 변수를 선언 및 0이란 값을 할당한다
		console.log(b);  // 여기서는 console.log(b);를 해도 0이 출력된다 
	})();

	b++;               // 하지만 위의 함수의 블록 스코프 내에서 선언한 b는 해당 블록 스코프를 벗어나면 유효하지 않다. 
	console.log(b);    // 그래서 b가 define 되지 않았다라는 에러 메세지를 보여준다
``` 
- 그렇다면 _함수 스코프를 갖고있는 var라는 키워드를 블록 스코프에서 사용하면 어떻게 될까_?    
~~(cf. var 키워드의 `호이스팅 현상`)~~ 
```javascript
	// 블록 스코프 
  
	var c = 0;          // 블록 스코프 밖에서 선언한 변수라면 ...

	{ 
		c++;            
		console.log(c);   // 변수를 블록 스코프 내에서 사용하든...
	}
	console.log(c);     // 블록 스코프 밖에서 사용하든 문제 없음! 


	{
		var d = 0;         // 블록 스코프 내에서 변수를 선언하고 ...
		console.log(d);    // 블록 스코프 내에서 사용하는 것 또한 문제 없다! 
	}
	console.log(d);      // 그렇다면 블록 스코프 내에서 선언한 변수를 블록 스코프 밖에서 사용하려고 했을 경우는?? 
	// 놀랍게도 이 경우에도 문제가 없다! var로 선언한 변수만 보여주는 현상! 
	// cf. "var의 호이스팅 현상"과 관련있는 내용이다! 
```
<br>
<br>

## `var` 키워드와 호이스팅(`hoisting`) 현상

- 일반적으로 우리가 어떤 함수를 만들고 실행하고자 할 때, 우리는 함수를 먼저 선언하고, 선언 이후에 함수를 호출하게 된다.  
아래와 같이;  
```javascript
	function hello1() {       // 함수 선언부터 하고...
		console.log('hello1');
	}

	hello1();                // 함수를 호출한다
```
- 하지만 함수를 선언하기 전에 함수의 호출을 먼저하는 경우가 있을 수도 있다.  
아래와 같이;
```javascript
	hello2();                // 함수의 호출을 먼저하고..

	function hello2() {      // 함수의 선언을 나중에 ... 
		console.log('hello');  // 그렇다면 질문! 이건 정상적으로 동작할까?? 
	}                        // 결론만 보면, 정상적으로 동작하는 것처럼 보인다! 
	                         // 이유: 호이스팅 현상 때문에!
```
- 위의 예시의 `호이스팅(현상)`이라는 것은 '아래 있는 선언을(/**-만**) 끌어올리는 듯한 현상이 일어나서 선언하지 않았지만 마치 선언을 한 것처럼 작동하는 현상'을 의미한다. 그래서 마치 프로그램이 동작할 때 오류가 난 것처럼 받아들일 수 있는 현상이 나타나게 된다.  
- 위에서 본 `호이스팅 현상`이라는 것은 함수에서만 일어나는 것은 아니고, var 사용한 변수도 이런 현상이 일어나게 된다.   
아래의 예시를 보며 확인해 보자; 
```javascript
	var age;   // var 라는 키워드를 사용하여 age라는 변수를 선언해 놓고 ...

	age = 6;   // 선언을 한 뒤에 변수에 값을 할당하고... 
	console.log(age);   // 그리고 age라는 변수를 console.log(); 를 사용하여 출력하는 것이 가능하다. 


	// 하지만... 

	age = 8;       // var age; 라고 선언을 하기 전에 할당을 하고 ...
	age++;         // a++; 을 하고 ...
	console.log(age);  // age를 선언전에 호출해도 정상적으로 age가 출력이 된다.

	var age;       // 그 이유는 바로 var 키워드의 호이스팅 현상 때문이다. 
```
- 이런 '마치 아래에 있는 선언을 위로 끌어올리는 듯한 호이스팅 현상'이 어떻게 일어나게 되는 건지 예제를 통해 알아보자!  
```javascript
	console.log(name);     // (밑에서 var 키워드로 선언된 name이라는 변수는 지금 값이 할당된 것이 아닌 변수로 선언만 된 상태이기 때문에 현재로써는 ->) undefined 를 출력한다 

	name = 'Mark';          // 여기서 비로소 name이라는 변수에 값이 할당된다


	console.log(name);     // Mark 라는 값이 출력된다 

	var name;              // 호이스팅 된다 

	// 그런데 여기서 조심해야 할 부분!!!! 
	// 아래와 같은 예시에서는 그럼 처음에는 Charlotte 가 출력되고, 그 뒤에 Mark 가 출력될까?

	console.log(name);    // 여기서는 놀랍게도 undefined가 출력된다... 왜?? 

	name = 'Mark';       // 그리고 여기서 값이 할당돼서...

	console.log(name);   // 여기서는 Mark 가 출력되고... 

	var name = 'Charlotte'; // 여기서 변수 name에 비로소 Charlotte 라는 값이 할당되는 것이다...! 그리고 이 지점 다음에 console.log(name); 을 해보면 Charlotte가 출력될 것이다.
	// 여기서 우리는 호이스팅 현상이란 변수 선언문만 마치 위로 끌어올리는 듯이 작동하는 현상이라는 것을 알 수 있다. 즉, 호이스팅 된 것은 var name; 이라는 변수 선언문이지 할당문이 아니라는 사실! 
```
- 이런 혼란스러움을 없애고자 ES6부터는 `const`와 `let`을 사용하기 시작했고, 이 두 키워드를 사용하면 호이스팅 현상이 생기지 않는다; 
```javascript
	console.log(name);

	name = "Mark";

	console.log(name);
	
	let name;          // 호이스팅 현상이 일어날 수 없다!
	                   // Uncaught ReferenceError: name is not defined 라는 에러 메세지를 보여준다!
```
<br>

---
<details>
<summary>CLICK ME!</summary>

- cf. 
	- https://velog.io/@ksh4820/var-let-const-차이점
	- https://poiemaweb.com/es6-block-scope


</details>

---